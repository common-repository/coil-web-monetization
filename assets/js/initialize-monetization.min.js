/*! Coil Web Monetization for WordPress v2.0.1 Tuesday 15th November 2022 10:08:11 AM GMT+0000 */
!function(d){if("undefined"==typeof coilParams)console.error("There was a problem retrieving the Coil parameters");else if(t()||document.body.classList.contains("coil-public")){const _=coilParams.content_container,y=coilParams.paywall_title,b=coilParams.loading_content,v=coilParams.paywall_message,L=coilParams.streaming_widget_unpaid_message,P=coilParams.streaming_widget_paid_message,z=Boolean(coilParams.show_streaming_widget_to_members),x=coilParams.streaming_widget_link,C=coilParams.post_excerpt,k=Boolean(coilParams.has_coil_divider),S=coilParams.admin_missing_id_notice,E=coilParams.paywall_button_text,q=coilParams.paywall_button_link,j=coilParams.coil_message_branding,A=coilParams.streaming_widget_theme,I=coilParams.streaming_widget_size,N=coilParams.streaming_widget_position,$=coilParams.streaming_widget_margin_top,D=coilParams.streaming_widget_margin_right,F=coilParams.streaming_widget_margin_bottom,G=coilParams.streaming_widget_margin_left,J=Boolean(coilParams.streaming_widget_enabled),T=coilParams.site_logo,B=coilParams.coil_logo,K=coilParams.coil_logo_streaming,M=coilParams.coil_logo_white,O=coilParams.coil_logo_white_streaming,H=coilParams.exclusive_message_theme,R=Boolean(coilParams.font_selection),U=wp.template("subscriber-only-message"),V=wp.template("streaming-widget-message"),X=d("p.monetize-msg");let s=!1;function e(e,t){const i=document.createElement("p");return i.classList.add("monetize-msg"),t&&i.classList.add(t),i.innerHTML=e,i}function i(e){const t=document.createElement("div");t.classList.add("entry-content","coil-message-container"),"dark"===H&&t.classList.add("coil-dark-theme"),R&&t.classList.add("coil-inherit-theme-font");let i="";"site_logo"===j&&""!==T?i=i='<img src="'+T+'">':"coil_logo"===j&&"dark"===H?i='<img src="'+M+'">':"coil_logo"===j&&(i='<img src="'+B+'">');e={headerLogo:i,title:y,content:e,button:{text:E,href:q}};return d(t).append(U(e)),t}function a(e){var t=function(e){var t=N.split("-"),i=t[0],t=t[1];let o,n,s,a;const r=document.createElement("div");d(r).addClass("streaming-widget-container "+i+" "+t);let c="";c="light"===A?(r.classList.add("coil-light-theme"),B):M;"small"===I&&r.classList.add("streaming-widget-small");e={headerLogo:c,widget:{text:e,href:x}};d(r).append(V(e)),a="left"===t?(n="0",l(G)):(n=l(D),"0");s="top"===i?(o=l($),"0"):(o="0",l(F));return d(r).find(".streaming-widget").css({"margin-top":o+"px","margin-right":n+"px","margin-bottom":s+"px","margin-left":a+"px"}),r}(e);d("body").append(t),/^\s+$/.test(e)&&d(".streaming-widget a div").hide(),d("#js-streaming-widget-dismiss").on("click",function(){p()||(Cookies.set("ShowStreamingWidgetMsg",1,{expires:14}),d(this).parent().parent().remove())}),d(".streaming-widget").hover(function(){d("#js-streaming-widget-dismiss").css("display","block")},function(){d("#js-streaming-widget-dismiss").css("display","none")})}function o(){var e=g(),t=0!==d(".streaming-widget-container").length,i=p(),o=0!==d("p.monetize-msg").length,n=0!==d(".coil-message-container").length;!e||t||i||o||n||a(L)}function l(e){return 0<=e.search(/[^1234567890-]/i)?"0":e}function r(){const e=document.querySelector(_);e&&(e.style.display="block")}function n(){if(""!==C){const e=document.createElement("div"),t=(e.classList.add("entry-content","coil-message-container"),document.createElement("p"));return t.classList.add("coil-post-excerpt"),t.innerHTML=C,d(e).append(t),e}}function c(){var e=document.body.classList.contains("coil-monetized"),t=document.body.classList.contains("coil-public");return e&&t}function m(){return document.body.classList.contains("coil-exclusive")}function g(){return J&&document.body.classList.contains("show-streaming-widget")}function u(){return".content-area .entry-content, main .entry-content"===_||".content-area .entry-content"===_}function f(){return!!document.body.classList.contains("coil-show-excerpt")}function p(){var e=Cookies.get("ShowStreamingWidgetMsg");return void 0!==e&&"1"===e}function w(){document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?t()&&d(_).before(e(S,"admin-message")):d("body").removeClass("coil-missing-id"),c()||u()||r(),d("body").trigger("coil-missing-id")):c()?setTimeout(function(){!1===s&&o()},5e3):(m()&&k&&0===d("p.monetize-msg").length?d(".coil-restricted-content").after(e(b,"")):m()&&f()&&null!==n()?(document.body.classList.add("show-excerpt-message"),d(_).before(n()),d(_).last().before(e(b,""))):document.querySelector(_).before(e(b,"")),setTimeout(function(){0<d("p.monetize-msg").length&&(d("p.monetize-msg").remove(),m()?k?(document.body.classList.add("show-fw-message"),d(".coil-restricted-content").before(i(v))):f()&&null!==n()?(0===d(".coil-post-excerpt").length&&d(_).before(n()),d(_).last().before(i(v))):(document.body.classList.add("show-fw-message"),d(_).before(i(v))):(document.body.classList.add("show-fw-message"),document.querySelector(_).before(i(v))))},5e3))}function h(e){s=!0;let t="";document.body.classList.contains("show-fw-message")&&d("body").removeClass("show-fw-message"),d("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),X.remove(),f()&&d("p.coil-post-excerpt").remove(),m()&&d(".entry-content.coil-message-container").remove(),r();{const n=document.querySelector(".coil-restricted-content");n&&(n.style.display="block")}var i,o;document.querySelectorAll("iframe, object, video").forEach(function(e){if(e.classList.contains("intrinsic-ignore")||e.parentNode.classList.contains("intrinsic-ignore"))return!0;e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height))}),d("body").trigger("coil-monetization-initialized",[e]),0<d("p.monetize-msg").length&&d("p.monetize-msg").remove(),jQuery(window).trigger("resize"),z?(e=g(),i=0!==d(".streaming-widget-container").length,o=p(),t="light"===A?K:O,e&&!o&&(i?d(".streaming-widget div").text(P):a(P),d(".streaming-widget a").removeAttr("href").css("cursor","default"),d(".streaming-widget a").css("cursor","default"),d(".streaming-widget a img").attr("src",t))):d(".streaming-widget-container").remove()}function Q(e){var t=e.paymentPointer,i=e.receipt,o=e.amount,n=e.assetCode,s=e.assetScale;d("body").trigger("coil-monetization-progress",[e,t,i,o,n,s])}function W(){if(document.body.classList.contains("monetization-not-initialized")){if(!c()&&!u())if(k){const t=_.split(", ");t.forEach(e=>{d(e+" .coil-restricted-content").hide()})}else d(_).not(".coil-post-excerpt").hide();const e=document.querySelector("link[rel=monetization]");if(!e||!e.relList.supports("monetization"))return void 0===document.monetization?void(window.Cypress&&window.Cypress.monetized||(d("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),m()?k?(document.body.classList.add("show-fw-message"),d(".coil-restricted-content").before(i(v))):(f()&&null!==n()?(document.body.classList.add("show-excerpt-message"),d(_).before(n())):document.body.classList.add("show-fw-message"),d(_).last().before(i(v))):o(),d("body").trigger("coil-extension-not-found"))):(w(),void document.monetization.addEventListener("monetizationstart",h));w(),e.addEventListener("monetization",h,{once:!0}),e.addEventListener("monetization",Q)}}d(document).ready(function(){document.addEventListener("coilstart",h),W()})}function t(){let e;try{e=document.querySelector(coilParams.content_container)}catch(e){return void console.error("An error occured when attempting to retrieve the page. Invalid container.")}if(e)return 1;console.error("An error occured when attempting to retrieve the page. Container not found.")}}(jQuery);